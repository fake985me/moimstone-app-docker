<template>
  <div
    :class="[
      'fixed inset-y-0 left-0 bg-gradient-to-br from-gray-50 to-gray-100 text-gray-650 shadow-2xl flex flex-col transition-all duration-300',
      collapsed ? 'w-20' : 'w-64'
    ]">
    <!-- Logo & Toggle Button -->
    <div class="flex items-center justify-center h-16 bg-white shadow-md border-b border-gray-200 flex-shrink-0 relative">
      <h1 v-show="!collapsed" class="text-base tracking-wide">ðŸ“¦ MDI Stock Management</h1>
      <h1 v-show="collapsed" class="text-2xl">ðŸ“¦</h1>
      
      <!-- Toggle Button -->
      <button 
        @click="$emit('toggle')"
        class="absolute -right-3 top-1/2 transform -translate-y-1/2 bg-gray-500 hover:bg-gray-500 text-white rounded-full p-2 shadow-lg transition-all duration-200 hover:scale-110 z-50">
        <svg v-if="!collapsed" class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 19l-7-7 7-7m8 14l-7-7 7-7" />
        </svg>
        <svg v-else class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 5l7 7-7 7M5 5l7 7-7 7" />
        </svg>
      </button>
    </div>

    <!-- Navigation - Scrollable -->
    <nav class="flex-1 overflow-y-auto mt-6 px-4 space-y-1 pb-6">
      <!-- Main Menu -->
      <SidebarLink to="/" icon="ðŸ " label="Home" :collapsed="collapsed" />
      <SidebarLink to="/dashboard" icon="ðŸ“Š" label="Dashboard" :collapsed="collapsed" />
      <SidebarLink to="/dashboard/products" icon="ðŸ“¦" label="Products" :collapsed="collapsed" />
      <SidebarLink to="/dashboard/categories" icon="ðŸ“‘" label="Categories" :collapsed="collapsed" />
      <SidebarLink to="/dashboard/stock" icon="ðŸ“ˆ" label="Stock Management" :collapsed="collapsed" />
      <SidebarLink to="/dashboard/sales" icon="ðŸ’°" label="Sales" :collapsed="collapsed" />
      <SidebarLink to="/dashboard/purchases" icon="ðŸ›’" label="Purchases" :collapsed="collapsed" />
      <SidebarLink to="/dashboard/warranties" icon="ðŸ›¡ï¸" label="Warranties" :collapsed="collapsed" />
      <SidebarLink to="/dashboard/lendings" icon="ðŸ”„" label="Lendings" :collapsed="collapsed" />
      <SidebarLink to="/dashboard/rmas" icon="â†©ï¸" label="RMA Management" :collapsed="collapsed" />
      <SidebarLink to="/dashboard/project-investments" icon="ðŸ“Š" label="Project Investment" :collapsed="collapsed" />
      <SidebarLink to="/dashboard/msa-projects" icon="ðŸ”§" label="MSA Project" :collapsed="collapsed" />
      <SidebarLink to="/dashboard/assets" icon="ðŸ·ï¸" label="Asset Management" :collapsed="collapsed" />
      <SidebarLink to="/dashboard/deliveries" icon="ðŸšš" label="Deliveries" :collapsed="collapsed" />
      <SidebarLink to="/dashboard/history" icon="ðŸ“œ" label="History" :collapsed="collapsed" />
      <SidebarLink to="/dashboard/sales-people" icon="ðŸ‘¥" label="Sales Team" :collapsed="collapsed" />

      <!-- Project & Accounting Section -->
      <SidebarSection title="Project & Finance" :collapsed="collapsed">
        <SidebarLink to="/dashboard/project-planning" icon="ðŸ“‹" label="Project Planning" :collapsed="collapsed" />
        <SidebarLink to="/dashboard/accounting" icon="ðŸ’µ" label="Accounting" :collapsed="collapsed" />
      </SidebarSection>

      <!-- CMS Section -->
      <SidebarSection title="Website Content" :collapsed="collapsed">
        <SidebarLink to="/dashboard/cms/solutions" icon="ðŸ’¡" label="Solutions" :collapsed="collapsed" />
        <SidebarLink to="/dashboard/cms/projects" icon="ðŸš€" label="Projects" :collapsed="collapsed" />
        <SidebarLink to="/dashboard/cms/settings" icon="ðŸŽ¨" label="Site Settings" :collapsed="collapsed" />
        <SidebarLink to="/dashboard/cms/contact" icon="ðŸ“ž" label="Contact Info" :collapsed="collapsed" />
        <SidebarLink to="/dashboard/cms/carousel" icon="ðŸŽ " label="Carousel" :collapsed="collapsed" />
        <SidebarLink to="/dashboard/cms/public-products" icon="ðŸ“¦" label="Public Products" :collapsed="collapsed" />
        <SidebarLink to="/dashboard/pages" icon="ðŸ“„" label="Pages" :collapsed="collapsed" />
      </SidebarSection>

      <!-- Admin Only -->
      <SidebarLink v-if="isSuperAdmin" to="/dashboard/users" icon="âš™ï¸" label="User Management" :collapsed="collapsed" class="mt-4" />
    </nav>
  </div>
</template>

<script setup>
import SidebarLink from './SidebarLink.vue';
import SidebarSection from './SidebarSection.vue';

defineProps({
  collapsed: {
    type: Boolean,
    default: false
  },
  isSuperAdmin: {
    type: Boolean,
    default: false
  }
});

defineEmits(['toggle']);
</script>
