<template>
  <div class="menu-item-container">
    <!-- Menu Item Link or Button -->
    <component
      :is="item.to && !item.children ? 'router-link' : 'button'"
      :to="item.to && !item.children ? item.to : undefined"
      :class="[
        'menu-item',
        { 'active': isActive, 'has-children': item.children }
      ]"
      :style="{ paddingLeft: `${depth * 1}rem` }"
      @click="item.children ? toggleExpand() : null"
    >
      <!-- Icon -->
      <span v-if="item.icon && depth === 0" class="menu-icon">
        <component :is="getIcon(item.icon)" />
      </span>
      
      <!-- Label -->
      <span v-if="!collapsed" class="menu-label">{{ item.name }}</span>
      
      <!-- Chevron for expandable items -->
      <span v-if="item.children && !collapsed" class="menu-chevron">
        <svg 
          :class="['chevron-icon', { 'rotated': isExpanded }]"
          viewBox="0 0 24 24" 
          fill="none" 
          stroke="currentColor"
        >
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
        </svg>
      </span>
    </component>

    <!-- Children Items -->
    <Transition name="expand">
      <div v-if="item.children && isExpanded && !collapsed" class="menu-children">
        <SidebarMenuItem
          v-for="child in item.children"
          :key="child.name"
          :item="child"
          :collapsed="collapsed"
          :depth="depth + 1"
        />
      </div>
    </Transition>
  </div>
</template>

<script setup>
import { ref, computed, h } from 'vue'
import { useRoute } from 'vue-router'

const props = defineProps({
  item: {
    type: Object,
    required: true
  },
  collapsed: {
    type: Boolean,
    default: false
  },
  depth: {
    type: Number,
    default: 0
  }
})

const route = useRoute()
const isExpanded = ref(false)

// Check if current route matches this item or any children
const isActive = computed(() => {
  if (props.item.to) {
    return route.path === props.item.to
  }
  if (props.item.children) {
    return hasActiveChild(props.item.children)
  }
  return false
})

const hasActiveChild = (children) => {
  return children.some(child => {
    if (child.to && route.path === child.to) return true
    if (child.children) return hasActiveChild(child.children)
    return false
  })
}

// Auto-expand if has active child
if (hasActiveChild(props.item.children || [])) {
  isExpanded.value = true
}

const toggleExpand = () => {
  isExpanded.value = !isExpanded.value
}

// Simple icon components
const getIcon = (iconName) => {
  const icons = {
    accounts: {
      render() {
        return h('svg', { class: 'w-5 h-5', viewBox: '0 0 958.736 958.736', fill: 'gray', stroke: 'currentColor' }, [
          h('path', { 'stroke-linecap': 'round', 'stroke-linejoin': 'round', 'stroke-width': '0.8', d: 'M95.5 944.268h63.8c27.6 0 50-22.399 50-50v-164.3c-53.2 7.8-107.9 12.7-162.9 14.4h-1v149.8c.1 27.7 22.5 50.1 50.1 50.1m293.6 0c27.601 0 50-22.399 50-50v-219.5c-26.5 9.101-54 17.4-81.699 24.801-24.801 6.6-50.4 12.6-75.9 17.8-2 .399-4.1.8-6.2 1.2v175.6c0 27.6 22.4 50 50 50h63.8zm229.6 0c27.6 0 50-22.399 50-50v-330.4c-4.8 3.2-9.601 6.3-14.5 9.3-42.3 26.6-88.4 50.7-137.101 71.6-4 1.7-8.1 3.4-12.199 5.101v244.3c0 27.6 22.399 50 50 50h63.8zm279.7-50v-577.8c-10.101 20.5-21.801 40.7-35 60.4-29.101 43.3-65.5 84.3-108.4 121.8-6.6 5.8-13.4 11.5-20.4 17.2v378.5c0 27.6 22.4 50 50 50h63.8c27.6-.1 50-22.5 50-50.1m-873.2-180.4h.4c6.7-.101 13.3-.3 20-.5 55.6-1.7 110.3-6.7 163.8-14.7 22.2-3.3 44.1-7.2 65.9-11.6q37.5-7.65 74.101-17.4c30.8-8.2 60.699-17.4 89.699-27.7 22.5-8 44.5-16.5 65.9-25.7 47.3-20.3 91.7-43.399 132.8-69.3 10.601-6.7 21-13.5 31-20.5 23.5-16.3 45.5-33.399 65.9-51.2 40.899-35.699 75.399-74.399 103.1-115.7 27.8-41.4 48.101-84.4 60.7-128.5 5.7-19.9 9.8-39.9 12.4-60.2h22.8c20.1 0 32-22.6 20.6-39.2l-73.5-106.5c-5-7.2-12.8-10.8-20.6-10.8s-15.601 3.6-20.601 10.8l-73.399 106.5c-11.4 16.6.399 39.2 20.6 39.2h22.9c-7.8 45.6-26.2 90.2-55 133-6.3 9.3-13 18.5-20.101 27.5-18.899 24-40.899 46.899-65.899 68.7q-37.8 33-84.3 62.399c-25.101 15.8-51.601 30.5-79.5 44-21.2 10.3-43.2 19.9-65.9 28.8-36.6 14.4-75.2 27-115.5 37.801-16 4.3-32.1 8.199-48.4 11.8-21.7 4.8-43.7 9-65.9 12.6-53.4 8.7-108.1 14-163.8 15.9-6.9.2-13.8.399-20.8.5-13.6.3-24.6 11.3-24.6 25v50c.2 13.8 11.4 25 25.2 25' })
        ])
      }
    },
    home: {
      render() {
        return h('svg', { class: 'w-5 h-5', viewBox: '0 0 32 32', fill: 'gray', stroke: 'currentColor' }, [
          h('path', { 'stroke-linecap': 'round', 'stroke-linejoin': 'round', 'stroke-width': '0.9', d: 'M0 15.656v-.031C.281 12 1.594 9.281 3.875 7.562c2.25-1.75 4.688-2.594 7.344-2.594 2.781-.031 5.375.906 7.688 2.781 2.344 1.844 3.5 4.594 3.5 8.156v.219c0 3.594-1.156 6.281-3.5 8.125-2.344 1.875-4.938 2.813-7.719 2.813h-.125c-2.719-.031-5.219-.969-7.531-2.844-2.313-1.844-3.5-4.688-3.531-8.563zm10.531-4.906V5.812h-.75c-.156.188-.281.406-.406.594S9.125 6.781 9 7a7 7 0 0 0-.375.625 3.6 3.6 0 0 0-.313.594 8 8 0 0 0-.469.906 6 6 0 0 0-.375.813c.188.125.406.281.656.375.281.094.563.188.844.25.313.063.594.094.844.125.281.031.531.063.719.063zm1.313-4.937v4.906c.156 0 .344.031.531 0 .188 0 .406-.031.594-.063.344-.063.75-.156 1.063-.25.344-.125.656-.281.875-.469-.375-.906-.781-1.625-1.188-2.313s-.875-1.281-1.375-1.781v-.031h-.5zm-3.375.281v-.031c-.219.094-.438.25-.688.344-.219.094-.5.219-.719.344q-.656.329-1.313.75c-.406.281-.813.594-1.156.906.125.125.281.25.406.344s.281.219.438.344c.125.063.281.156.438.281.156.094.344.219.531.344.25-.563.5-1.156.813-1.688.313-.563.656-1.094 1-1.563a.7.7 0 0 1 .125-.188c.031-.031.063-.125.125-.188zm9.562 2.312v-.031c-.781-.594-1.469-1.094-2.156-1.406s-1.375-.625-2-.875c.5.5.938 1.125 1.219 1.719.313.625.625 1.281.875 1.906.125-.063.281-.125.469-.25.156-.094.375-.188.563-.281.188-.125.344-.25.531-.375.188-.156.375-.281.5-.406zm-.531 6.969h3.594c0-1.156-.25-2.25-.719-3.375a8.2 8.2 0 0 0-1.844-2.781v-.031c-.156.25-.375.469-.594.625-.25.156-.469.281-.719.406-.156.094-.313.219-.469.281-.156.094-.375.156-.531.25.125.25.25.531.375.781.094.281.25.594.313.875.188.5.313 1.031.438 1.563.094.469.156.969.156 1.406M6.188 10.75v-.031c-.25-.125-.531-.219-.75-.344-.219-.156-.438-.313-.625-.438-.188-.094-.375-.219-.531-.344s-.281-.25-.406-.375c-.813.781-1.406 1.656-1.781 2.688a13 13 0 0 0-.813 3.438h3.844c0-.875.125-1.719.344-2.563a8.4 8.4 0 0 1 .719-2.031zm4.343 4.594V11.75c-.25.031-.563.031-.844 0a4.2 4.2 0 0 1-.906-.219c-.25-.063-.563-.125-.813-.219a3 3 0 0 1-.781-.313 5 5 0 0 0-.469 1.094c-.156.375-.25.781-.344 1.156-.063.375-.094.781-.125 1.125s-.063.688-.063.969zm1.313-3.531v3.531h4.625c0-.188 0-.406-.031-.656-.063-.219-.094-.5-.125-.75-.094-.375-.188-.781-.313-1.156-.125-.344-.25-.688-.406-.969-.063-.156-.125-.344-.188-.469-.094-.156-.188-.25-.25-.344-.344.25-.813.406-1.375.531-.531.125-1.156.25-1.719.281zm-6.719 4.562H1.281c0 .531.094 1.125.25 1.844.156.75.469 1.438.813 2.188.156.375.344.75.531 1.125.219.344.469.719.719 1.063.188-.125.375-.219.531-.313.188-.094.406-.219.594-.313.219-.094.438-.188.688-.313.219-.094.5-.219.781-.344-.25-.781-.531-1.531-.719-2.375a9.5 9.5 0 0 1-.344-2.531zm5.406 3.656v-3.656H6.187c0 .25.031.625.094 1 .031.375.125.781.188 1.188.125.438.219.875.344 1.25s.25.688.375.969a13 13 0 0 1 1.5-.469c.406-.125.781-.219 1.156-.25h.344c.125-.031.25-.031.344-.031zm1.313-3.656V20c.219.031.469.063.719.094.281.031.625.094.906.156l.469.094c.156.063.344.094.5.125.188.063.375.094.563.156.156.063.313.094.438.156.406-1.031.656-1.875.813-2.594a8 8 0 0 0 .219-1.781v-.031h-4.625zm9.25.031v-.031H17.5v.188a17 17 0 0 1-.25 2c-.125.688-.406 1.5-.781 2.5.5.25.969.5 1.344.75s.719.531.969.781c.531-.531 1-1.25 1.406-2.188.406-.906.688-1.844.844-2.844.031-.188.031-.375.063-.563v-.594zm-10.563 9.5v-4.875c-.781.125-1.438.281-1.938.406s-.875.25-1.125.375c.188.469.375.875.563 1.25.188.344.406.719.594 1.031.063.125.188.25.281.406.094.125.156.281.25.406.094.156.188.344.281.531.125.156.219.344.344.469h.75zm1.313 0h.719c.281-.219.563-.531.781-.875.25-.344.531-.75.719-1.094.219-.406.438-.781.625-1.156s.344-.719.469-.969c-.344-.125-.813-.25-1.281-.375s-1.125-.25-2.031-.375zm6.187-2.562v-.031c-.063-.094-.188-.219-.281-.313s-.25-.219-.406-.313q-.187-.141-.469-.281c-.282-.14-.438-.219-.656-.344-.125.25-.344.688-.656 1.281-.281.594-.781 1.313-1.406 2.094a5.8 5.8 0 0 0 2.094-.781 7 7 0 0 0 1.781-1.313zm-11.625-1v-.031c-.219.125-.563.281-.906.438a7 7 0 0 0-1.156.594c.219.188.438.375.625.5.188.156.406.281.594.406.344.219.75.438 1.156.625s.906.375 1.531.563c-.219-.25-.375-.563-.531-.813s-.344-.5-.5-.75-.281-.531-.406-.781c-.156-.25-.281-.5-.406-.75z' })
        ])
      }
    },
    history: {
      render() {
        return h('svg', { class: 'w-5 h-5', viewBox: '0 0 24 24', fill: 'gray', stroke: 'currentColor' }, [
          h('path', { 'stroke-linecap': 'round', 'stroke-linejoin': 'round', 'stroke-width': '0.1', d: 'M8 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1h2a2 2 0 0 1 2 2v15a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2zm0 2H6v15h12V5h-2v1a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1zm6-1h-4v1h4z' })
        ])
      }
    },
    dashboard: {
      render() {
        return h('svg', { class: 'w-5 h-5', viewBox: '0 0 32 32', fill: 'gray', stroke: 'currentColor' }, [
          h('path', { 'stroke-linecap': 'round', 'stroke-linejoin': 'round', 'stroke-width': '0.1', d: 'M6.693 25.684a.747.747 0 0 0 .989-.373l.002-.005 4.484-10.012 4.137 1.415q.11.039.242.04a.75.75 0 0 0 .547-.236l7.155-7.619v2.651a.75.75 0 0 0 1.5 0V6.999l-.003-.016-.005-.023a.74.74 0 0 0-.225-.5l-.004-.008-.018-.007a.74.74 0 0 0-.495-.196h-4.545a.75.75 0 0 0 0 1.5h2.811l-6.934 7.384-4.326-1.479a.755.755 0 0 0-.925.399l-.002.005-4.764 10.636a.75.75 0 0 0 .373.988l.005.002zM30 29.25H2.75V2a.75.75 0 0 0-1.5 0v28c0 .414.336.75.75.75h28a.75.75 0 0 0 0-1.5' })
        ])
      }
    },
    pages: {
      render() {
        return h('svg', { class: 'w-5 h-5', viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor' }, [
          h('path', { 'stroke-linecap': 'round', 'stroke-linejoin': 'round', 'stroke-width': '1.5', d: 'M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z' })
        ])
      }
    },
    elements: {
      render() {
        return h('svg', { class: 'w-5 h-5', viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor' }, [
          h('path', { 'stroke-linecap': 'round', 'stroke-linejoin': 'round', 'stroke-width': '1.5', d: 'M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4' })
        ])
      }
    },
    components: {
      render() {
        return h('svg', { class: 'w-5 h-5', viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor' }, [
          h('path', { 'stroke-linecap': 'round', 'stroke-linejoin': 'round', 'stroke-width': '1.5', d: 'M4 5a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM14 5a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1V5zM4 15a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H5a1 1 0 01-1-1v-4zM14 15a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z' })
        ])
      }
    },
    categories: {
      render() {
        return h('svg', { class: 'w-5 h-5', viewBox: '-7.5 0 32 32', fill: 'none', stroke: 'currentColor' }, [
          h('path', { 'stroke-linecap': 'round', 'stroke-linejoin': 'round', 'stroke-width': '2.5', d: 'M2.594 4.781.875 6.531h15.5l-1.719-1.75zm14.625 8.625H0V7.375h17.219zm-5.156-1.718V9.969H5.188v1.719h.844v-.875h5.156v.875zm5.156 8.625H0v-6.031h17.219zm-5.156-1.719v-1.75H5.188v1.75h.844v-.875h5.156v.875zm5.156 8.594H0v-6h17.219zm-5.156-1.719V23.75H5.188v1.719h.844v-.875h5.156v.875z' })
        ])
      }
    },
    table: {
      render() {
        return h('svg', { class: 'w-5 h-5', viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor' }, [
          h('path', { 'stroke-linecap': 'round', 'stroke-linejoin': 'round', 'stroke-width': '1.5', d: 'M3 10h18M3 14h18m-9-4v8m-7 0h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z' })
        ])
      }
    },
    chart: {
      render() {
        return h('svg', { class: 'w-5 h-5', viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor' }, [
          h('path', { 'stroke-linecap': 'round', 'stroke-linejoin': 'round', 'stroke-width': '1.5', d: 'M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z' })
        ])
      }
    },
    deliveries: {
      render() {
        return h('svg', { class: 'w-5 h-5', viewBox: '0 0 512 512', fill: 'gray', stroke: 'currentColor' }, [
          h('path', { 'stroke-linecap': 'round', 'stroke-linejoin': 'round', 'stroke-width': '15', d: 'm507.699 229.009-51.2-76.809a25.59 25.59 0 0 0-21.299-11.401H332.8v-25.6c0-14.14-11.46-25.6-25.6-25.6H25.6C11.46 89.6 0 101.06 0 115.2v230.4c0 14.14 11.46 25.6 25.6 25.6h65.297c5.948 29.175 31.795 51.2 62.703 51.2s56.755-22.025 62.703-51.2h117.794c5.948 29.175 31.795 51.2 62.703 51.2s56.755-22.025 62.703-51.2H486.4c14.14 0 25.6-11.46 25.6-25.6V243.209c0-5.052-1.493-9.993-4.301-14.2M153.6 396.8c-21.205 0-38.4-17.195-38.4-38.4s17.195-38.4 38.4-38.4 38.4 17.195 38.4 38.4-17.195 38.4-38.4 38.4m153.6-51.2h-90.897c-5.948-29.175-31.795-51.2-62.703-51.2s-56.755 22.025-62.703 51.2H25.6V320h25.6v-25.6H25.6V115.2h281.6zm25.6-179.2h102.4l45.756 68.642-68.25-17.067a13 13 0 0 0-3.106-.375h-76.8zm64 230.4c-21.205 0-38.4-17.195-38.4-38.4s17.195-38.4 38.4-38.4 38.4 17.195 38.4 38.4-17.195 38.4-38.4 38.4m89.6-115.2h-25.6v25.6h25.6v38.4h-26.897c-5.948-29.175-31.795-51.2-62.703-51.2s-56.755 22.025-62.703 51.2H332.8V243.2h75.221l78.379 19.601z' })
        ])
      }
    },
    forms: {
      render() {
        return h('svg', { class: 'w-5 h-5', viewBox: '0 0 290.07 290.07', fill: 'gray', stroke: 'currentColor' }, [
          h('path', { 'stroke-linecap': 'round', 'stroke-linejoin': 'round', 'stroke-width': '1.5', d: 'M54.922 0a5 5 0 0 0-4.924 5.07v280a5 5 0 0 0 5 5l180.821-.062c2.125-.286 4.06-1.783 4.234-4.514L240.073 5a5 5 0 0 0-5-5h-180v.01c-.05 0-.1-.01-.148-.01zm5.076 10h170.073v270.07H59.998zm35 10.07a5 5 0 0 0-5 5v10a5 5 0 0 0 5 5h100a5 5 0 0 0 5-5v-10a5 5 0 0 0-5-5zm0 30a5 5 0 0 0-5 5v10a5 5 0 0 0 5 5h100a5 5 0 0 0 5-5v-10a5 5 0 0 0-5-5zm0 50c-6.761-.096-6.761 10.096 0 10h100c6.762.096 6.762-10.096 0-10zm0 20c-6.761-.096-6.761 10.096 0 10h100c6.762.096 6.762-10.096 0-10zm0 20c-6.761-.096-6.761 10.096 0 10h100c6.762.096 6.762-10.096 0-10zm50 40c-13.748 0-25 11.252-25 25 0 3.573.767 6.975 2.133 10.057l-11.91 38.465c-1.243 4.018 2.727 7.682 6.633 6.121l8.144-3.256 8.143 3.256c2.902 1.161 6.146-.597 6.76-3.662l5.095-25.48 5.098 25.48c.769 3.999 4.705 4.831 7.387 3.412l7.517-3.006 7.033 2.812c3.405 2.526 9.499-.526 7.723-5.738l-12.203-37.709a24.8 24.8 0 0 0 2.447-10.752c0-13.748-11.252-25-25-25m0 10c8.344 0 15 6.656 15 15s-6.656 15-15 15c-8.343 0-15-6.656-15-15s6.657-15 15-15m-15.373 34.668a25 25 0 0 0 5.67 3.359l-4.021 20.098-4.42-1.768a5 5 0 0 0-3.713 0l-.266.106zm30.393.28 6.941 21.453-.105-.043a5 5 0 0 0-3.713 0l-4.42 1.768-4.02-20.096a25 25 0 0 0 5.317-3.082' })
        ])
      }
    },
    products: {
      render() {
        return h('svg', { class: 'w-5 h-5', viewBox: '0 0 52 52', fill: 'none', stroke: 'currentColor' }, [
          h('path', { 'stroke-linecap': 'round', 'stroke-linejoin': 'round', 'stroke-width': '4', d: 'M24 35.33a.81.81 0 0 1 .81.71v11.52A2.44 2.44 0 0 1 22.49 50H6.07a2.45 2.45 0 0 1-2.44-2.28V36.15a.81.81 0 0 1 .71-.81H24zm23.61 0a.82.82 0 0 1 .81.71v11.52A2.44 2.44 0 0 1 46.09 50H29.67a2.44 2.44 0 0 1-2.43-2.28V36.15a.81.81 0 0 1 .71-.81h19.61zM17.69 38.7l-.09.07-4.6 5.06-2.11-2a.62.62 0 0 0-.79-.07l-.08.07-.87.78a.49.49 0 0 0-.07.71l.07.08 3 2.83a1.25 1.25 0 0 0 .87.36 1.15 1.15 0 0 0 .87-.36l5.52-5.84a.63.63 0 0 0 .06-.72l-.06-.07-.87-.78a.61.61 0 0 0-.85-.12m23.61 0-.09.07-4.66 5.06-2.11-2a.61.61 0 0 0-.78-.07l-.09.07-.87.78a.49.49 0 0 0-.06.71l.06.08 3 2.83a1.25 1.25 0 0 0 .87.36 1.14 1.14 0 0 0 .87-.36L43 40.34a.65.65 0 0 0 0-.72v-.07l-.87-.78a.61.61 0 0 0-.83-.07M22.54 27.18a2.36 2.36 0 0 1 2.27 2.28v2.61a.81.81 0 0 1-.66.81H2.76a.78.78 0 0 1-.76-.7v-2.55a2.38 2.38 0 0 1 2.13-2.44h18.41zm25.18 0A2.36 2.36 0 0 1 50 29.46v2.61a.81.81 0 0 1-.66.81h-21.4a.78.78 0 0 1-.75-.71v-2.54a2.38 2.38 0 0 1 2.13-2.44h18.4zm-12-17a.81.81 0 0 1 .8.71v11.48a2.44 2.44 0 0 1-2.28 2.44H17.87a2.46 2.46 0 0 1-2.44-2.29V11a.81.81 0 0 1 .71-.8h19.62zm-6.27 3.37-.08.07-4.66 5.06-2.11-2a.61.61 0 0 0-.78-.07l-.09.07-.87.78a.5.5 0 0 0-.07.71l.07.08 3 2.82a1.22 1.22 0 0 0 .87.37 1.13 1.13 0 0 0 .87-.37l5.53-5.83a.65.65 0 0 0 .05-.72l-.05-.07-.87-.78a.62.62 0 0 0-.77-.15zM35.76 2a2.44 2.44 0 0 1 2.43 2.28v2.61a.83.83 0 0 1-.71.81H14.62a.81.81 0 0 1-.81-.7V4.44A2.44 2.44 0 0 1 16.08 2z' })
        ])
      }
    },
    settings: {
      render() {
        return h('svg', { class: 'w-5 h-5', viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor' }, [
          h('path', { 'stroke-linecap': 'round', 'stroke-linejoin': 'round', 'stroke-width': '1.5', d: 'M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z' }),
          h('path', { 'stroke-linecap': 'round', 'stroke-linejoin': 'round', 'stroke-width': '1.5', d: 'M15 12a3 3 0 11-6 0 3 3 0 016 0z' })
        ])
      }
    },
    stock: {
      render() {
        return h('svg', { class: 'w-5 h-5', viewBox: '0 0 612 612', fill: 'gray', stroke: 'currentColor' }, [
          h('path', { 'stroke-linecap': 'round', 'stroke-linejoin': 'round', 'stroke-width': '1.5', d: 'M119.645 4.007h170.841l-15.918 127.311H0L90.15 18.215a37.72 37.72 0 0 1 29.495-14.208m372.71 0h-170.84l15.918 127.311H612L521.85 18.215a37.72 37.72 0 0 0-29.495-14.208M612 153.153v407.693c0 26.039-21.108 47.147-47.146 47.147H47.147C21.109 607.993 0 586.885 0 560.846V153.153h274.568v160.858h62.864V153.153zM495.325 430.939h12.301v94.629a7.56 7.56 0 0 0 7.561 7.561h18.901a7.56 7.56 0 0 0 7.561-7.561v-94.629h12.302c5.821 0 9.458-6.301 6.548-11.342l-29.315-50.766c-2.911-5.039-10.187-5.039-13.096.001l-29.31 50.766c-2.911 5.042.727 11.341 6.547 11.341m-113.417 0h12.302v94.629a7.56 7.56 0 0 0 7.561 7.561h18.901a7.56 7.56 0 0 0 7.561-7.561v-94.629h12.301c5.819 0 9.458-6.301 6.547-11.342l-29.315-50.766c-2.911-5.039-10.186-5.039-13.096.001l-29.31 50.766c-2.91 5.042.728 11.341 6.548 11.341m192.938 124.145a3.78 3.78 0 0 0-3.781-3.78H362.448a3.78 3.78 0 0 0-3.779 3.78v11.341a3.78 3.78 0 0 0 3.779 3.781h208.616a3.78 3.78 0 0 0 3.781-3.781v-11.341z' })
        ])
      }
    },
    warehouse: {
      render() {
        return h('svg', { class: 'w-5 h-5', viewBox: '0 0 34 34', fill: 'gray', stroke: 'currentColor' }, [
          h('path', { 'stroke-linecap': 'round', 'stroke-linejoin': 'round', 'stroke-width': '1.5', d: 'M14.256 25.152h-7.08v-7.08H9.9v2.256h1.62V18.072h2.724v7.08zm9.252 0h-7.08v-7.08h2.724v2.256h1.62V18.072h2.724v7.08zM18.936 15.9h-7.08V8.82H14.58v2.256H16.2V8.82h2.724v7.08zm10.656 -6.432 -1.932 -0.9v16.788h-2.184V7.512l-10.14 -4.788L5.22 7.512v17.82H3.036V8.556l-1.932 0.912 -0.936 -1.98L15.336 0.324l15.204 7.152z' })
        ])
      }
    },
    sales: {
      render() {
        return h('svg', { class: 'w-5 h-5', viewBox: '0 0 512 512', fill: 'gray', stroke: 'currentColor' }, [
          h('path', { 'stroke-linecap': 'round', 'stroke-linejoin': 'round', 'stroke-width': '15', d: 'M223.455 453.803a31.8 31.8 0 0 0-17.804-5.44c-4.366 0-8.57.89-12.378 2.507a31.9 31.9 0 0 0-13.996 11.518 31.74 31.74 0 0 0-5.439 17.789c0 4.367.896 8.579 2.507 12.394a31.87 31.87 0 0 0 11.518 13.989 31.7 31.7 0 0 0 17.789 5.44c4.366.007 8.586-.89 12.394-2.507a31.9 31.9 0 0 0 13.981-11.512 31.7 31.7 0 0 0 5.44-17.804 31.7 31.7 0 0 0-2.499-12.378 31.94 31.94 0 0 0-11.513-13.996m-5.976 31.374a12.95 12.95 0 0 1-4.66 5.645 12.7 12.7 0 0 1-7.168 2.19c-1.794 0-3.455-.36-4.984-1.007-2.293-.962-4.263-2.61-5.653-4.66a12.65 12.65 0 0 1-2.183-7.168c0-1.794.353-3.455 1-4.984a12.9 12.9 0 0 1 4.661-5.653 12.7 12.7 0 0 1 7.159-2.19c1.801.007 3.47.36 4.991 1.007a12.9 12.9 0 0 1 5.653 4.66 12.73 12.73 0 0 1 2.183 7.16c0 1.802-.36 3.463-.999 5m180.462-31.374a31.73 31.73 0 0 0-17.796-5.44c-4.367 0-8.572.89-12.386 2.507a31.8 31.8 0 0 0-13.989 11.518 31.74 31.74 0 0 0-5.44 17.789c0 4.367.89 8.579 2.499 12.394a31.93 31.93 0 0 0 11.519 13.989 31.73 31.73 0 0 0 17.797 5.44c4.366.007 8.578-.89 12.394-2.507a31.9 31.9 0 0 0 13.981-11.512 31.77 31.77 0 0 0 5.44-17.804c0-4.366-.889-8.571-2.499-12.378a31.94 31.94 0 0 0-11.52-13.996m-5.975 31.374a12.84 12.84 0 0 1-4.661 5.645 12.7 12.7 0 0 1-7.159 2.19c-1.794 0-3.455-.36-4.984-1.007a12.9 12.9 0 0 1-5.66-4.66 12.7 12.7 0 0 1-2.176-7.168c0-1.794.353-3.455 1-4.984a12.87 12.87 0 0 1 4.66-5.653 12.7 12.7 0 0 1 7.16-2.19c1.794.007 3.462.36 4.991 1.007a12.9 12.9 0 0 1 5.652 4.66 12.74 12.74 0 0 1 2.184 7.16 12.9 12.9 0 0 1-1.007 5m68.038-333.596a23.1 23.1 0 0 0-17.862-8.468H346.03v-19.626h53.125l-17.627-22.031-70.524-88.21L300.403 0l-10.592 13.246-70.531 88.21-17.62 22.031h53.124v19.626H141.406l-10.233-35.166-.008-.022a44.96 44.96 0 0 0-33.674-31.094l-36.754-7.88c-6.227-1.331-12.357 2.631-13.688 8.857-1.338 6.219 2.632 12.357 8.85 13.688l36.769 7.88a21.93 21.93 0 0 1 16.407 15.157l67.179 230.786a51 51 0 0 0-4.389 2.316c-7.233 4.315-13.048 10.372-16.951 17.444-3.719 6.726-5.704 14.342-5.881 22.199h-.036v1.198h.036a47.6 47.6 0 0 0 3.72 17.399 47.93 47.93 0 0 0 17.296 21.008 47.64 47.64 0 0 0 26.72 8.16h216.085c6.366 0 11.526-5.16 11.526-11.526s-5.16-11.534-11.526-11.534H196.771c-3.447 0-6.667-.684-9.614-1.933a24.8 24.8 0 0 1-10.887-8.968c-2.558-3.793-4.065-8.277-4.19-13.188.132-5.858 1.992-10.938 5.27-15.002 1.705-2.102 3.808-3.94 6.351-5.462 2.499-1.5 5.47-2.683 8.931-3.433l217.202-35.357a34.61 34.61 0 0 0 28.344-27.249l26.559-130.61.007-.015a23 23 0 0 0 .464-4.586 23.08 23.08 0 0 0-5.204-14.599m-127.536 85.806h-64.122V109.924h-38.474l70.531-88.202 70.539 88.202h-38.474z' })
        ])
      }
    },
    purchases: {
      render() {
        return h('svg', { class: 'w-5 h-5', viewBox: '0 0 512 512', fill: 'gray', stroke: 'currentColor' }, [
          h('path', { 'stroke-linecap': 'round', 'stroke-linejoin': 'round', 'stroke-width': '15', d: 'M219.596 446.903a35.5 35.5 0 0 0-19.906-6.085c-4.885 0-9.596.995-13.855 2.804a35.7 35.7 0 0 0-15.647 12.884 35.37 35.37 0 0 0-6.085 19.898c0 4.884.995 9.596 2.804 13.863a35.64 35.64 0 0 0 12.876 15.647 35.5 35.5 0 0 0 19.907 6.085 35.3 35.3 0 0 0 13.854-2.805 35.8 35.8 0 0 0 15.655-12.876 35.5 35.5 0 0 0 6.076-19.914 35.3 35.3 0 0 0-2.804-13.846 35.64 35.64 0 0 0-12.875-15.655m-6.684 35.093a14.47 14.47 0 0 1-5.205 6.315 14.24 14.24 0 0 1-8.016 2.45c-2.015 0-3.873-.403-5.584-1.126-2.565-1.077-4.769-2.919-6.315-5.213a14.15 14.15 0 0 1-2.45-8.017c0-2.006.402-3.865 1.118-5.575a14.46 14.46 0 0 1 5.213-6.323c2.303-1.554 5.016-2.442 8.018-2.45a14.3 14.3 0 0 1 5.582 1.126 14.4 14.4 0 0 1 6.315 5.213c1.546 2.303 2.442 5 2.451 8.009a14.3 14.3 0 0 1-1.127 5.591m201.868-35.093a35.55 35.55 0 0 0-19.915-6.085c-4.884 0-9.587.995-13.846 2.804a35.6 35.6 0 0 0-15.656 12.884 35.5 35.5 0 0 0-6.084 19.898c0 4.884 1.003 9.596 2.804 13.863a35.65 35.65 0 0 0 12.884 15.647 35.45 35.45 0 0 0 19.898 6.085 35.4 35.4 0 0 0 13.863-2.805 35.7 35.7 0 0 0 15.647-12.876 35.53 35.53 0 0 0 6.077-19.914 35.3 35.3 0 0 0-2.796-13.846 35.7 35.7 0 0 0-12.876-15.655m-6.694 35.093a14.4 14.4 0 0 1-5.204 6.315c-2.303 1.553-5.008 2.442-8.017 2.45-2.006 0-3.865-.403-5.575-1.126-2.566-1.077-4.769-2.919-6.331-5.213a14.2 14.2 0 0 1-2.434-8.017c0-2.006.395-3.865 1.118-5.575a14.4 14.4 0 0 1 5.214-6.323c2.302-1.554 4.999-2.442 8.008-2.45a14.4 14.4 0 0 1 5.592 1.126 14.47 14.47 0 0 1 6.315 5.213 14.25 14.25 0 0 1 2.45 8.009 14.4 14.4 0 0 1-1.136 5.591m76.107-373.148a25.83 25.83 0 0 0-19.98-9.472H356.705V0H254.64v99.376H127.826L116.373 60.04v-.024a50.3 50.3 0 0 0-37.667-34.78l-41.12-8.815c-6.956-1.488-13.814 2.944-15.31 9.908-1.497 6.956 2.944 13.822 9.908 15.31l41.12 8.815a24.53 24.53 0 0 1 18.352 16.954l75.153 258.15a54 54 0 0 0-4.908 2.59c-8.099 4.827-14.595 11.602-18.961 19.512-4.16 7.524-6.381 16.042-6.586 24.832h-.033v1.34h.033a53.4 53.4 0 0 0 4.16 19.462 53.64 53.64 0 0 0 19.356 23.5 53.24 53.24 0 0 0 29.88 9.127h241.705c7.12 0 12.893-5.772 12.893-12.892s-5.772-12.901-12.893-12.901H189.749c-3.848 0-7.45-.765-10.754-2.162a27.74 27.74 0 0 1-12.17-10.031c-2.861-4.243-4.555-9.258-4.686-14.751.14-6.553 2.228-12.235 5.895-16.782 1.9-2.352 4.251-4.408 7.096-6.109 2.812-1.677 6.117-3.001 9.998-3.84L428.083 306.9c15.869-2.59 28.49-14.718 31.698-30.48l29.716-146.096.008-.017c.345-1.693.51-3.42.51-5.13a25.83 25.83 0 0 0-5.822-16.329M305.669 256.415l-78.886-98.669h43.036V15.17h71.715v142.576h43.037z' })
        ])
      }
    },
    users: {
      render() {
        return h('svg', { class: 'w-5 h-5', viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor' }, [
          h('path', { 'stroke-linecap': 'round', 'stroke-linejoin': 'round', 'stroke-width': '1.5', d: 'M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z' })
        ])
      }
    }
  }
  return icons[iconName] || icons.dashboard
}
</script>

<style scoped>
.menu-item-container {
  width: 100%;
}

.menu-item {
  display: flex;
  align-items: center;
  width: 100%;
  padding: 0.6rem 1.25rem;
  color: #6b7280;
  font-size: 0.875rem;
  text-decoration: none;
  border-left: 3px solid transparent;
  transition: all 0.15s ease;
  background: transparent;
  border-top: none;
  border-right: none;
  border-bottom: none;
  cursor: pointer;
  text-align: left;
}

.menu-item:hover {
  color: #689ff1;
  background: rgba(48, 182, 100, 0.05);
}

.menu-item.active {
  color: #306ab6;
  background: rgba(48, 182, 100, 0.1);
  border-left-color: #0b324d;
  font-weight: 500;
}

.menu-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 1.5rem;
  height: 1.5rem;
  margin-right: 0.75rem;
  flex-shrink: 0;
}

.menu-label {
  flex: 1;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.menu-chevron {
  display: flex;
  align-items: center;
  margin-left: auto;
}

.chevron-icon {
  width: 1rem;
  height: 1rem;
  transition: transform 0.2s ease;
}

.chevron-icon.rotated {
  transform: rotate(90deg);
}

.menu-children {
  overflow: hidden;
}

/* Expand/Collapse Animation */
.expand-enter-active,
.expand-leave-active {
  transition: all 0.2s ease;
}

.expand-enter-from,
.expand-leave-to {
  opacity: 0;
  transform: translateY(-10px);
}
</style>
